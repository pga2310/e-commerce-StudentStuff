void function(){function s(e){if(e==null)return 0;switch(typeof e){case"number":return e<8?e:0;case"string":return e in i?i[e]:0;case"boolean":return+e;case"function":case"object":return(e.left?1:0)|(e.middle?2:0)|(e.right?4:0)}}function o(e,t){for(var n in t)e.addEventListener(n,t[n],true)}function u(e){function s(e){t.update(e);t.emit(e)}if(!(this instanceof u))return new u(e);var t=this;var n=this.update.bind(this);var i=0;this.view=e;this.x=0;this.y=0;this.buttons=0;this.buttonStates=r[0];this.active=false;this.listeners=Object.create(null);this.lastActivity=Date.now();this.dragging=false;var a={mousewheel:s,dblclick:s,mouseup:s,click:function(n){t.update(n);if(t.dragging){t.lastType="drop";t.emit(n);t.lastType="click";t.dragging=false}t.emit(n);t.buttons&=~(1<<n.button);t.buttonStates=r[t.buttons%8]},mouseover:function(n){if(n.relatedTarget===null){t.update(n);t.emit(n)}},mouseout:function(n){if(n.relatedTarget===null){t.update(n);if(t.dragging){t.lastType="drop";t.emit(n)}t.update(n);t.emit(n)}},mousedown:function(n){t.buttons|=1<<n.button;t.buttonStates=r[t.buttons%8];t.update(n);t.emit(n)},contextmenu:function(t){a.click(t)},mousemove:function(n){if(t.dragging){t.update(n);t.lastType="drag";t.emit(n)}else if(t.buttons&&t.lastType==="down"){t.update(t.last);t.dragging=true;t.lastType="grab";t.emit(t.last)}t.update(n);t.emit(n)}};o(e,a)}function a(e,t){if(!t&&typeof e==="function")t=e,e="buttons"in t?t.buttons:0;else e=s(e);t.buttons=e;return t}var e="pageXOffset"in window?{x:"pageXOffset",y:"pageYOffset"}:{x:"scrollX",y:"scrollY"};var t={click:"click",contextmenu:"click",dblclick:"dblclick",down:"down",drag:"drag",drop:"drop",grab:"grab",mousedown:"down",mousemove:"move",mouseout:"out",mouseover:"over",mouseup:"up",mousewheel:"wheel",move:"move",out:"out",over:"over",up:"up",wheel:"wheel"};var n="move over out down up wheel click dblclick grab drag drop";var r=[],i=Object.create(null);void function(e,t){while(e--){r[e]=Object.freeze({left:(e&1)>0,middle:(e&2)>0,right:(e&4)>0});t=[];r[e].left&&t.push("left");r[e].middle&&t.push("middle");r[e].right&&t.push("right");i[t.join("+")]=e}}(8);u.prototype={constructor:u,emit:function(t){var n=this.listeners[this.lastType];if(n)for(var r=0;r<n.length;r++)if(!n[r].buttons||n[r].buttons===this.buttons)n[r].call(this,t)},on:function(r,i,s){r==="*"&&(r=n);s=a(i,s);r.split(/\s+/).forEach(function(e){e=t[e];this[e]||(this[e]=[]);this[e].push(s)},this.listeners)},once:function(t,n,r){r=a(n,r);this.on(t,r.buttons,function i(e){r.call(this,e);this.off(t,i)})},off:function(r,i){r==="*"&&(r=n);r.split(/\s+/).forEach(function(e){var n=this[t[e]];if(n){var r=n.indexOf(i);if(~r)n.splice(r,1)}},this.listeners)},update:function(n){n.name=this.lastType=t[n.type];n.buttons=this.buttons;n.buttonStates=this.buttonStates;this.x=n.clientX;this.y=n.clientY;this.lastActivity=n.timeStamp;this.last=n}};Object.keys(u.prototype).forEach(function(e){Object.defineProperty(u.prototype,e,{enumerable:false})});if(typeof Window!=="undefined")Window.prototype.Mouse=u;window.mouse=new u(window)}()